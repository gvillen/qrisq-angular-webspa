<div class="main-container">
  <!-- banner -->

  <qrisq-banner [imageUrl]="'/assets/images/main-background.jpg'">
    <div class="banner-content">
      <h1>Q-risq Hurricane Viewer</h1>
      <p>
        Use the map below to see the latest storm advisory<br />
        for your service address.
      </p>
    </div>
  </qrisq-banner>

  <div class="page-content">
    <div class="storm-section">
      <ng-container
        *ngIf="stormData$ | async as stormData; else loadingStormData"
      >
        <ng-container *ngIf="mapMode === 'summary'">
          <qr-storm-summary-info
            [stormName]="stormData.stormName"
            [userAddress]="stormData.address"
            [userAddress]="stormData.address"
            [surgeRisk]="stormData.surgeRisk"
            [advisoryDate]="stormData.advisoryDate"
            [landfallDate]="stormData.landfallDate"
            [landfallLocation]="stormData.landfallLocation"
            [stormDistance]="stormData.stormDistance"
          >
          </qr-storm-summary-info>
        </ng-container>

        <ng-container *ngIf="mapMode === 'surge'">
          <qr-storm-surge-info
            [stormName]="stormData.stormName"
            [userAddress]="stormData.address"
            [userAddress]="stormData.address"
            [surgeRisk]="stormData.surgeRisk"
            [advisoryDate]="stormData.advisoryDate"
            [landfallDate]="stormData.landfallDate"
            [landfallLocation]="stormData.landfallLocation"
            [stormDistance]="stormData.stormDistance"
          >
          </qr-storm-surge-info>
        </ng-container>

        <ng-container *ngIf="surgeGeoJson">
          <qr-storm-map
            [surgeGeoJSON]="surgeGeoJson"
            [lineGeoJSON]="stormData.lineGeoJSON"
            [pointsGeoJSON]="stormData.pointsGeoJSON"
            [polygonsGeoJSON]="stormData.polygonsGeoJSON"
            [windGeoJSON]="stormData.windGeoJSON"
            [windData]="stormData.windData"
            [userLattitude]="stormData.lattitude"
            [userLongitude]="stormData.longitude"
            [surgeRisk]="stormData.surgeRisk"
            [stormDistance]="stormData.stormDistance"
            [mode]="mapMode"
            (modeChange)="onMapModeChange($event)"
          >
          </qr-storm-map>
        </ng-container>

        <div class="next-forecast-container">
          <h4>Next Forecast Available</h4>
          <p>{{ stormData.nextAdvisoryDate }}</p>
        </div>
      </ng-container>

      <!-- <div class="storm-data">
          <div nz-row nzJustify="center">
            <div nz-col nzSpan="24">
              <qr-storm-summary-data
                [stormData]="stormData"
              ></qr-storm-summary-data>
            </div>
          </div>
        </div>

        <div class="storm-map">
          <div nz-row nzJustify="center">
            <div nz-col class="col-1" nzSpan="24">
              
            </div>
          </div>
        </div> -->

      <ng-template #loadingStormData>
        <nz-skeleton [nzActive]="true"> </nz-skeleton
      ></ng-template>
    </div>

    <nz-divider></nz-divider>

    <!-- footer -->
    <div nz-row class="section-footer">
      <div nz-col nzSpan="16" class="section-footer-trackstorm">
        <h3><strong>Track Storm Activities</strong></h3>
        <img nz-image nzSrc="/assets/images/ourservice-botton.jpg" alt="" />
        <p>
          Stay current on storm activity with the National Hurricane Centerâ€™s
          up-to-date weather information for tropical storms and hurricanes.
        </p>
        <button nz-button nzType="primary" nzSize="large" nzDanger nzBlock>
          Visit the National Hurricane Center
        </button>
      </div>

      <div nz-col nzSpan="8" class="section-footer-messageform">
        <h3><strong>Send us a message</strong></h3>
        <div class="form-container">
          <form nz-form [nzLayout]="'vertical'">
            <nz-form-item>
              <nz-form-control>
                <input nz-input placeholder="Name (Required)" />
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-control>
                <input nz-input placeholder="Email (Required)" />
              </nz-form-control>
            </nz-form-item>

            <nz-form-item>
              <nz-form-control>
                <textarea
                  rows="10"
                  nz-input
                  placeholder="Message (Required)"
                ></textarea>
              </nz-form-control>
            </nz-form-item>

            <button nz-button nzBlock nzType="primary" nzDanger nzSize="large">
              Submit
            </button>

            <p>
              *Please excuse slower than normal response time during a storm
              event.
            </p>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
